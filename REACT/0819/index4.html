<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.0.1/redux.js"></script>
        <style>
            body {
                font-family: Arial, sans-serif;
                padding: 20px;
            }

            .filter-btn {
                padding: 8px 16px;
                margin: 5px;
                border: 2px solid #ddd;
                background: white;
                cursor: pointer;
            }

            .filter-btn.active {
                background: #ff5a5f;
                color: white;
            }

            .listing {
                border: 3px solid #ddd;
                padding: 15px;
                margin: 10px 0;
            }

            .listing.hidden {
                display: none;
            }

            .amenity {
                display: inline-block;
                background: #f0f0f0;
                padding: 2px 6px;
                margin: 2px;
                font-size: 12px;
            }

            .amenity.highlight {
                background: #ff5a5f;
                color: white;
            }
        </style>
    </head>

    <body>
        <h1>Redux Airbnb í•„í„°ë§</h1>

        <div>
            <h3>í¸ì˜ì‹œì„¤ í•„í„°:</h3>
            <button class="filter-btn" onclick="toggleFilter('ë¬´ë£Œ ì£¼ì°¨ ê³µê°„')">ë¬´ë£Œ ì£¼ì°¨ ê³µê°„</button>
            <button class="filter-btn" onclick="toggleFilter('ëŒ€í˜• ìš•ì¡°')">ëŒ€í˜• ìš•ì¡°</button>
            <button class="filter-btn" onclick="toggleFilter('ë°”ë² í ê·¸ë¦´')">ë°”ë² í ê·¸ë¦´</button>
            <button class="filter-btn" onclick="toggleFilter('ê²ŒìŠ¤íŠ¸ìš© ë³„ì±„')">ê²ŒìŠ¤íŠ¸ìš© ë³„ì±„</button>
            <button class="filter-btn" onclick="toggleFilter('ìˆ˜ì˜ì¥')">ìˆ˜ì˜ì¥</button>
            <button class="filter-btn" onclick="toggleFilter('ì£¼ë°©')">ì£¼ë°©</button>
            <button class="filter-btn" onclick="toggleFilter('TV')">TV</button>
        </div>

        <div id="resultsInfo"></div>

        <div id="listingsContainer">
            <!-- ìˆ™ì†Œ ëª©ë¡ì´ ì—¬ê¸°ì— ë Œë”ë§ -->
        </div>

        <script>
            // ìƒ˜í”Œ ë°ì´í„°
            const listings = [
                { id: 1, title: "ë„ì‹¬ ì•„íŒŒíŠ¸", location: "ê°•ë‚¨êµ¬", price: "85,000ì›", amenities: ["ë¬´ë£Œ ì£¼ì°¨ ê³µê°„", "ì£¼ë°©", "TV"] },
                { id: 2, title: "ëŸ­ì…”ë¦¬ íœíŠ¸í•˜ìš°ìŠ¤", location: "í•œë‚¨ë™", price: "250,000ì›", amenities: ["ëŒ€í˜• ìš•ì¡°", "ìˆ˜ì˜ì¥", "ê²ŒìŠ¤íŠ¸ìš© ë³„ì±„", "ì£¼ë°©", "TV"] },
                { id: 3, title: "ë°”ë‹¤ë·° íœì…˜", location: "í•´ìš´ëŒ€", price: "120,000ì›", amenities: ["ë°”ë² í ê·¸ë¦´", "ì£¼ë°©", "ë¬´ë£Œ ì£¼ì°¨ ê³µê°„"] },
                { id: 4, title: "ì‚°ì† ë³„ì¥", location: "í‰ì°½", price: "95,000ì›", amenities: ["ë°”ë² í ê·¸ë¦´", "ê²ŒìŠ¤íŠ¸ìš© ë³„ì±„", "ë¬´ë£Œ ì£¼ì°¨ ê³µê°„", "TV"] },
                { id: 5, title: "ëª¨ë˜ ìŠ¤íŠœë””ì˜¤", location: "í™ëŒ€", price: "65,000ì›", amenities: ["ì£¼ë°©", "TV"] },
                { id: 6, title: "ë¦¬ì¡°íŠ¸ ë¹Œë¼", location: "ì œì£¼ë„", price: "180,000ì›", amenities: ["ìˆ˜ì˜ì¥", "ëŒ€í˜• ìš•ì¡°", "ë°”ë² í ê·¸ë¦´", "ë¬´ë£Œ ì£¼ì°¨ ê³µê°„", "ì£¼ë°©", "TV"] },
            ];

            // Redux ìŠ¤í† ì–´ ìƒì„±
            const store = Redux.createStore(reducer);

            function reducer(state, action) {
                console.log("Redux Action:", action); // Redux ì•¡ì…˜ ë¡œê¹…

                if (state === undefined) {
                    return {
                        listings: listings, // ì›ë³¸ ìˆ™ì†Œ ë°ì´í„° (ë¶ˆë³€)
                        activeFilters: [], // í˜„ì¬ ì„ íƒëœ í¸ì˜ì‹œì„¤ ëª©ë¡
                        filteredListings: listings, // í•„í„°ë§ëœ ê²°ê³¼ë“¤
                    };
                }

                if (action.type === "TOGGLE_FILTER") {
                    const newFilters = state.activeFilters.includes(action.filter) ? state.activeFilters.filter((f) => f !== action.filter) : [...state.activeFilters, action.filter];

                    const filteredListings = newFilters.length === 0 ? state.listings : state.listings.filter((listing) => newFilters.every((filter) => listing.amenities.includes(filter)));

                    return {
                        ...state,
                        activeFilters: newFilters,
                        filteredListings: filteredListings,
                    };
                }

                return state;
            }

            // ì•¡ì…˜ ë””ìŠ¤íŒ¨ì¹˜
            function toggleFilter(filter) {
                store.dispatch({ type: "TOGGLE_FILTER", filter: filter });
            }

            // UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
            function updateUI() {
                const state = store.getState();
                console.log("Current State:", state); // í˜„ì¬ ìƒíƒœ ë¡œê¹…

                // í•„í„° ë²„íŠ¼ ì—…ë°ì´íŠ¸
                document.querySelectorAll(".filter-btn").forEach((btn) => {
                    const filterText = btn.textContent.trim();
                    btn.classList.toggle("active", state.activeFilters.includes(filterText));
                });

                // ê²°ê³¼ ì •ë³´ ì—…ë°ì´íŠ¸
                const resultsInfo = document.getElementById("resultsInfo");
                resultsInfo.innerHTML = `<p><strong>í™œì„± í•„í„°:</strong> ${state.activeFilters.join(", ") || "ì—†ìŒ"} | <strong>ê²°ê³¼:</strong> ${state.filteredListings.length}ê°œ ìˆ™ì†Œ</p>`;

                // ìˆ™ì†Œ ëª©ë¡ ì—…ë°ì´íŠ¸
                const container = document.getElementById("listingsContainer");
                container.innerHTML = state.filteredListings
                    .map(
                        (listing) => `
                <div class="listing">
                    <h4>${listing.title} - ${listing.location}</h4>
                    <p>ê°€ê²©: ${listing.price}</p>
                    <p>í¸ì˜ì‹œì„¤: 
                        ${listing.amenities.map((amenity) => `<span class="amenity ${state.activeFilters.includes(amenity) ? "highlight" : ""}">${amenity}</span>`).join(" ")}
                    </p>
                </div>
            `
                    )
                    .join("");
            }

            // ìŠ¤í† ì–´ êµ¬ë… - ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ UI ì—…ë°ì´íŠ¸
            store.subscribe(updateUI);

            // ì´ˆê¸° ë Œë”ë§
            updateUI();
            /*
        Claudeì—ê²Œ ì§€ê¸ˆ í”„ë¡œì íŠ¸ê°€ ì˜¤ë²„ì—”ì§€ë‹ˆì–´ë§ì´ ì•„ë‹ˆëƒê³  ë¬¼ì–´ë´¤ì„ ë•Œ ë‹µë³€ì…ë‹ˆë‹¤.

        ## ğŸ¤” í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” Reduxê°€ ê³¼í•œ ì´ìœ 

        **ì¼ë°˜ Filter ë°©ì‹:**
        ```javascript
        let activeFilters = [];
        function toggleFilter(filter) {
            if (activeFilters.includes(filter)) {
                activeFilters = activeFilters.filter(f => f !== filter);
            } else {
                activeFilters.push(filter);
            }
            updateUI();
        }
        ```
        - ì½”ë“œ 10ì¤„ë¡œ ë
        - ì´í•´í•˜ê¸° ì‰¬ì›€
        - ì„±ëŠ¥ë„ ì¶©ë¶„

        **Redux ë°©ì‹:**
        - ì½”ë“œ 50ì¤„ ì´ìƒ
        - ê°œë… í•™ìŠµ í•„ìš” (store, reducer, action, dispatch)
        - ì„¤ì •ì´ ë³µì¡

        ## ğŸš€ Reduxê°€ ì§„ì§œ í•„ìš”í•œ ìƒí™©ë“¤

        ### 1. **ë³µì¡í•œ ìƒíƒœ ê³µìœ **
        ```javascript
        // ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê°™ì€ ë°ì´í„°ë¥¼ ì‚¬ìš©í•  ë•Œ
        - Header: ë¡œê·¸ì¸ ìƒíƒœ, ì¥ë°”êµ¬ë‹ˆ ê°œìˆ˜
        - Sidebar: ì‚¬ìš©ì ì •ë³´
        - Main: ìƒí’ˆ ëª©ë¡
        - Footer: ì•Œë¦¼ ê°œìˆ˜
        ```

        ### 2. **ìƒíƒœ ë³€í™”ì˜ ë³µì¡ì„±**
        ```javascript
        // í•˜ë‚˜ì˜ ì•¡ì…˜ì´ ì—¬ëŸ¬ ìƒíƒœë¥¼ ë™ì‹œì— ë³€ê²½
        - "ìƒí’ˆ êµ¬ë§¤" ë²„íŠ¼ í´ë¦­ ì‹œ:
        * ì¬ê³  ìˆ˜ëŸ‰ ê°ì†Œ
        * ì¥ë°”êµ¬ë‹ˆì—ì„œ ì œê±°
        * ì£¼ë¬¸ ë‚´ì—­ì— ì¶”ê°€
        * í¬ì¸íŠ¸ ì ë¦½
        * ì•Œë¦¼ ìƒì„±
        ```

        ### 3. **ë””ë²„ê¹…ì´ ì¤‘ìš”í•œ ê²½ìš°**
        ```javascript
        // ë²„ê·¸ ë°œìƒ ì‹œ "ì–´ë–¤ ìˆœì„œë¡œ ìƒíƒœê°€ ë³€í–ˆëŠ”ì§€" ì¶”ì  í•„ìš”
        - ì€í–‰ ì•±: ì”ì•¡ ë³€í™” ì¶”ì 
        - ê²Œì„: ì ìˆ˜/ë ˆë²¨ ë³€í™” ì¶”ì 
        - ì „ììƒê±°ë˜: ì£¼ë¬¸ ê³¼ì • ì¶”ì 
        ```

        ### 4. **ì‹¤ì œ Airbnb ê°™ì€ ì„œë¹„ìŠ¤ë¼ë©´?**
        ```javascript
        // ì‹¤ì œë¡œëŠ” ì´ëŸ° ë³µì¡í•œ ìƒíƒœë“¤ì´ ìˆìŒ:
        {
        user: { id, name, preferences },
        filters: { amenities, price, location, dates },
        listings: { data, loading, error },
        booking: { selectedDates, guestCount, totalPrice },
        map: { center, zoom, markers },
        reviews: { data, rating },
        payments: { methods, processing }
        }
        ```

        ## ğŸ¯ ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ ë³€í™”ê°€ ì¤‘ìš”í•œ ì´ìœ 

        ### ë²„ê·¸ ë°œìƒ ì‹œë‚˜ë¦¬ì˜¤:
        ```javascript
        // ì¼ë°˜ ë°©ì‹ - ì–´ë””ì„œ ìƒíƒœê°€ ë³€í–ˆëŠ”ì§€ ëª¨ë¦„
        function someFunction() {
            activeFilters.push("ìˆ˜ì˜ì¥");
            // ... 100ì¤„ í›„
            activeFilters = []; // ëˆ„ê°€ ì–¸ì œ ì´ê±¸ í–ˆì§€?
        }

        // Redux ë°©ì‹ - ëª¨ë“  ë³€í™”ê°€ ê¸°ë¡ë¨
        // Action Log:
        // 1. { type: 'ADD_FILTER', filter: 'ìˆ˜ì˜ì¥' }
        // 2. { type: 'CLEAR_FILTERS' }
        ```

        ## ğŸ’¡ ê²°ë¡ : ì–¸ì œ Reduxë¥¼ ì¨ì•¼ í• ê¹Œ?

        **âŒ Redux í•„ìš” ì—†ëŠ” ê²½ìš°:**
        - ë‹¨ìˆœí•œ í•„í„°ë§, ê²€ìƒ‰
        - ì»´í¬ë„ŒíŠ¸ 1-2ê°œ
        - ìƒíƒœê°€ ê°„ë‹¨í•¨
        - ê°œì¸ í”„ë¡œì íŠ¸ë‚˜ í”„ë¡œí† íƒ€ì…

        **âœ… Redux ê³ ë ¤í•´ì•¼ í•˜ëŠ” ê²½ìš°:**
        - ì»´í¬ë„ŒíŠ¸ 5ê°œ ì´ìƒì—ì„œ ê°™ì€ ìƒíƒœ ê³µìœ 
        - ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
        - íŒ€ í”„ë¡œì íŠ¸ (ìƒíƒœ ë³€í™” ê·œì¹™ í†µì¼)
        - ì‚¬ìš©ì ì•¡ì…˜ ì¶”ì ì´ ì¤‘ìš”í•œ ì•±

        **í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” í•™ìŠµìš©ì´ë¼ Reduxë¥¼ ì“°ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ì¼ë°˜ filterê°€ ë” ì í•©í•©ë‹ˆë‹¤!** ReduxëŠ” "ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•  ë•Œì˜ í•´ê²°ì±…"ì´ì§€, "ëª¨ë“  ìƒí™©ì˜ ì •ë‹µ"ì€ ì•„ë‹ˆì—ìš”.
        */
        </script>
    </body>
</html>
